<odoo>
  <record id="action_pos_order_merge_button" model="ir.actions.server">
    <field name="name">Merge POS Orders</field>
    <field name="model_id" ref="point_of_sale.model_pos_order"/>
    <field name="binding_model_id" ref="point_of_sale.model_pos_order"/>
    <field name="state">code</field>
    <field name="code">
      action = {
          'type': 'ir.actions.act_window',
          'res_model': 'merge.pos.orders.wizard',
          'view_mode': 'form',
          'target': 'new',
          'context': {'default_pos_order_ids': active_ids},
      }
    </field>
  </record>

  <record id="action_button_merge_pos_order" model="ir.ui.view">
    <field name="name">pos.order.list</field>
    <field name="model">pos.order</field>
    <field name="inherit_id" ref="point_of_sale.view_pos_order_filter"/>
    <field name="arch" type="xml">
      <xpath expr="//tree" position="after">
        <button name="%(action_pos_order_merge_button)d" string="Merge to Invoice" type="action" class="btn-primary" context="{'active_ids': active_ids}"/>
      </xpath>
    </field>
  </record>
</odoo>
